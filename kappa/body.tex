%!TEX root = ../main.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Introduction}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Background}
Shipbuilding 4.0, at the principles of the Industry 4.0, will transform the design, manufacturing, operation, shipping, services, production systems, maintenance and value chains in all aspects of the shipbuilding industry \cite{stanic_toward_2018}.

There is an increasing digitization \cite{ichimura_shipping_2022} of ships. The ship's position, motions and fuel consumption as well as environmental data about wind, waves and current are just a few examples of data that can be collected.   


The idea of using twin models can be dated back to NASAâ€™s Apollo program where two identical space vehicles were built to allow mirroring the conditions of the space vehicle during the mission \cite{rosen_about_2015}. Considering the sizes of ships (and if you are not NASA) this is not a feasible option. Building ship scale models is a more realistic approach, which has been used for centuries. The increasing digitization of ships, has enabled a new possibility to also build models digitally. A Digital Twin (DT) in shipbuilding means a digital copy of a real ship, and is used to help optimize the design, maintenance, production and sustainability of the physical ship \cite{chen_review_2021}. The DT can also be used to reduce the fuel consumption and emissions for ships by optimizing the operation. Weather routing is an example of this. 

Virtual Prototyping (VP) is a related term which is also frequently used. VPs are generally model based in contrast to the data-driven DTs \cite{major_framework_2021}. A DT is generally a model for an existing ship from where data can be collected and the VPs are generally prototypes for future ships, where no operational data is available yet. The definitions of DT and VP overlap and are often used interchangeably. The models developed in this thesis lean more towards the data-driven DT definition. The DT models can be categorized as: white-box, black-box or grey-box modeling \cite{leifsson_grey-box_2008}. Most of the models in this thesis fall under the grey-box category.

\begin{itemize}
    \item White-box modeling \\
    involves applying physical principles, so that no observed data is required, for instance Computational Fluid Dynamics (CFD). Semi-empirical models where unknown physical constants have been derived from historical experiments, can also be considered as white-box models \cite{leifsson_grey-box_2008}. Ikeda's method to predict roll damping \cite{ikeda_components_1978} is one example of this (see Paper \ref{pap:rolldamping}).  

    \item Black-box modeling \\
    means that parameters do not have physical significance but where the objectives is to find a good model that fits the observed data \cite{lindskog_tools_1995}.
    
    \item Grey-box modeling \\
    is a combination of white-box and black-box modeling methods, so that both a physical model and data is used. This concept is also referred as semi-physical modeling, hybrid modeling or semi-mechanistic modeling in the literature \cite{leifsson_grey-box_2008}. 
\end{itemize}

\noindent The black-box modeling is entirely data driven, which means that no prior understanding of the system generating the data is needed.
In a grey box model the white and black parts can be combined in several ways using either a serial or parallel approach \cite{leifsson_grey-box_2008} as seen in Fig.\ref{fig:greycombinations}. 

\begin{figure}[H]
    \centering
    \begin{subfigure}[b]{0.3\textwidth}
    \centering
    \begin{tikzpicture}[node distance=2cm]
    \node (white-box) [white-box] {White-box};
    \node (black-box) [black-box, right of=white-box, xshift=2cm] {Black-box};
    \draw [arrow] (white-box) -- (black-box);
    \end{tikzpicture}
    \caption{Serial grey-box}
    \label{fig:serial1}
    \end{subfigure}

    
    \begin{subfigure}[b]{0.3\textwidth}
    \centering
    \begin{tikzpicture}[node distance=2cm]
    \node (black-box) [black-box] {Black-box};
    \node (white-box) [white-box, right of=black-box, xshift=2cm] {White-box};
    \draw [arrow] (black-box) -- (white-box);
    \end{tikzpicture}
    \caption{Serial grey-box}
    \label{fig:serial2}
    \end{subfigure}

    \begin{subfigure}[b]{0.3\textwidth}
    \centering
    \begin{tikzpicture}[node distance=2cm]
    \node (black-box) [black-box] {Black-box};
    \node (white-box) [white-box, below of=black-box] {White-box};
    \node (join) [process, right of=black-box, xshift=2cm, yshift=-1cm] {join};
    \draw [arrow] (black-box) -- (join);
    \draw [arrow] (white-box) -- (join);
    \end{tikzpicture}
    \caption{Parallel grey-box}
    \label{fig:parallel}
    \end{subfigure}
    \caption{Several ways to combine white- and black-box models in grey box models.}
    \label{fig:greycombinations}
\end{figure}

\noindent Grey-box modelling is often used in situations where white-box models are not giving the required accuracy by introducing some corrections after (Fig.\ref{fig:serial1}) or before (Fig.\ref{fig:serial2}) the white-box in a serial approach. Manoeuvring prediction of a ferry was conducted with this approach \cite{nielsen_machine_2022} where a deep learning model (Black-box) captures the residues between first-principles model (White-box) and observed data.
An alternative distinction between the VP and the DT is that VP uses white-box modeling, since no operational data exist, and the DT uses  black-box or grey-box modeling.

\section{Literature review}


%"Critic" to what has been done before
\section{Motivation and objective}
\label{sec:motivation}
The DT hydrodynamics should be developed as grey-box models with system identification in calm waters. A majority of the publications in the field of system identification use simulated data with added white noise. Even though noise has been added, the model is still perfect, which means that these methods are not confronting the whole problem, where both noise and system model should be unknown. 
Only when using data obtained from real physical systems, from model tests, as used in this thesis, the whole system identification problem is addressed.
As it is shown in both Paper \ref{pap:daiyong} and \ref{pap:pit}, it is possible to get an almost perfect identification of the model, when simulated data is used.

The main disadvantage with black-box modeling, is the dependence on the data used to model the system, which can result in limited extrapolation properties beyond the data that it is derived from \cite{leifsson_grey-box_2008}. The use of grey-box modelling as a combination of white-box and black-box aims at mitigating this disadvantage. A robust model should be capable of making extrapolations with predictions outside its training data, in order to be of practical use.
\bigbreak
\noindent To achieve the overall objective, the following two main research activities are described in this thesis:
% crawling, walking, running...
\begin{enumerate}

    \item Roll motion
    \begin{itemize}
        \item Develop a PIT for roll motion
        \item Build roll damping database for modern ship types tested at SSPA
        \item Develop grey-box model for prediction of modern ship roll damping parameters
    \end{itemize}
    
    \item Manoeuvring motion
    \begin{itemize}
        \item Develop a PIT for three degrees of freedom (surge, sway, yaw)
        \item Develop a method to handle noise
        \item Propose a methodology to choose the appropriate and robust VMM for extrapolation
 
    \end{itemize}
\end{enumerate}

\section{Assumptions and limitations}
%Calm waters...
Calm water condition is a simplification of the real sea condition that a ship encounters. This condition assumes that the influences from encountering wind, waves and currents are neglected. These assumptions simplifies the system identification, by reducing the degrees of freedoms to: surge, sway, yaw and roll. For surge, sway and yaw, which are all low frequency motions, the added masses and other hydrodynamic derivatives can be assumed as constants \cite{fossen_handbook_2021}.  
The sea is never calm, which is why scale model test data in a controlled calm water environment is used in this thesis. System identification of real operational data at sea, where these simplifications cannot be made, is  therefore left for future work. Investigating system identification in calm waters, is however an important step towards DTs in full scale sea operation.

\section{Outline of the paper}
Chapter \ref{ch:models} presents the parameterized models used in this thesis for the Roll motion (Section \ref{sec:roll}) and Manoeuvring motion (Section \ref{sec:VMM}). The PITs used for these motions are presented in Section \ref{sec:PIT_roll} and \ref{sec:PIT_VMM}. A generic roll damping model, to estimate the roll damping coefficients for modern ships is also presented in section \ref{sec:genericrolldampingmodel}.
A summary of the appended papers, including research activities and a selection of the important results is presented in chapter \ref{ch:results}, followed by the conclusions in chapter \ref{ch:conclusions} and plans for future work in chapter \ref{ch:future_work}.

\input{kappa/models}
\input{kappa/methods}
\input{kappa/results}
\input{kappa/conclusions}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Future work\label{ch:future_work}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
