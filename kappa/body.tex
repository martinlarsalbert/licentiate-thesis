%!TEX root = ../main.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Introduction}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Background}
Shipbuilding 4.0, at the principles of the Industry 4.0, will transform the design, manufacturing, operation, shipping, services, production systems, maintenance and value chains in all aspects of the shipbuilding 
industry \cite{stanic_toward_2018}.
The emergence of Internet-of-Things (IoT) has led to the introduction of the Internet-of-Ships (IoS) paradigm. \begin{quote} IoS is the interconnecting of sensing objects, such as ships, crews, cargoes, onboard equipments, waterway environment, waterway facilities, shore-based facilities, and other navigation elements, which are embedded with a variety of sensor and heterogeneous network technologies to enable these objects to collect and exchange data \cite{liu_internet_2016-1}.\end{quote}
Safety enhancements, route planning and optimization, energy efficiency, automatic berthing and autonomous shipping are some of the emerging applications for IoS \cite{aslam_internet_2020}.
A Digital Twin (DT) as a digital copy of a real ship, is one approach to achieve this \cite{chen_review_2021}. 
DTs are data-driven in contrast to the related term Virtual Prototyping (VP), which is instead model based \cite{major_framework_2021}. A DT is generally a model for an existing ship from where data can be collected and the VPs are generally prototypes for future ships, where no operational data is available yet.
White-box models are used in VP. Either black-box or grey-box models are used in the DTs. 

\begin{itemize}
    \item White-box modeling \\
    involves applying physical principles, so that no observed data is required, for instance Computational Fluid Dynamics (CFD). Semi-empirical models where unknown physical constants have been derived from historical experiments, can also be considered as white-box models \cite{leifsson_grey-box_2008}.  

    \item Black-box modeling \\
    means that parameters do not have physical significance but where the objectives is to find a good model that fits the observed data \cite{lindskog_tools_1995}.
    
    \item Grey-box modeling \\
    is a combination of white-box and black-box modeling methods, so that both a physical model and data is used. This concept is also referred as semi-physical modeling, hybrid modeling or semi-mechanistic modeling in the literature \cite{leifsson_grey-box_2008}. 
\end{itemize}

\noindent In a grey box model the white and black parts can be combined in several ways using either a serial or parallel approach \cite{leifsson_grey-box_2008} as seen in Fig.\ref{fig:greycombinations}. 

\begin{figure}[H]
    \centering
    \begin{subfigure}[b]{0.3\textwidth}
    \centering
    \begin{tikzpicture}[node distance=2cm]
    \node (white-box) [white-box] {White-box};
    \node (black-box) [black-box, right of=white-box, xshift=2cm] {Black-box};
    \draw [arrow] (white-box) -- (black-box);
    \end{tikzpicture}
    \caption{Serial grey-box}
    \label{fig:serial1}
    \end{subfigure}

    
    \begin{subfigure}[b]{0.3\textwidth}
    \centering
    \begin{tikzpicture}[node distance=2cm]
    \node (black-box) [black-box] {Black-box};
    \node (white-box) [white-box, right of=black-box, xshift=2cm] {White-box};
    \draw [arrow] (black-box) -- (white-box);
    \end{tikzpicture}
    \caption{Serial grey-box}
    \label{fig:serial2}
    \end{subfigure}

    \begin{subfigure}[b]{0.3\textwidth}
    \centering
    \begin{tikzpicture}[node distance=2cm]
    \node (black-box) [black-box] {Black-box};
    \node (white-box) [white-box, below of=black-box] {White-box};
    \node (join) [process, right of=black-box, xshift=2cm, yshift=-1cm] {join};
    \draw [arrow] (black-box) -- (join);
    \draw [arrow] (white-box) -- (join);
    \end{tikzpicture}
    \caption{Parallel grey-box}
    \label{fig:parallel}
    \end{subfigure}
    \caption{Several ways to combine white- and black-box models in grey box models.}
    \label{fig:greycombinations}
\end{figure}

\noindent The black-box modeling is entirely data driven, which means that no prior understanding of the system generating the data is needed and is therefore an attractive option for the DT modelling. The black-box modeling may however give infeasible models outside the domain covered by the available data \cite{nielsen_machine_2022}. The White-box modeling does not have this problem, but does on the other hand require a full understanding of the system, which may be possible for special cases, but in general not possible for the complex scenario of a ship operating at sea. In the deep sea: wind, waves and current will add complexity and in coastal areas water depth and bank-effects will add complexity \cite{nielsen_machine_2022}. 
\noindent Grey-box modelling is an attempt bridge these problems, to either mitigate the White-box modelling error or the Black-box extrapolation error. \cite{nielsen_machine_2022} used this approach for manoeuvring prediction of a ferry where a deep learning model (Black-box) captures the residues between first-principles model (White-box) and observed data.


\section{Literature review}


%"Critic" to what has been done before
\section{Motivation and objective}
\label{sec:motivation}
Motivation: IoS requires DT models of the ship's dynamics at sea.

Objective: Develop DT for ship dynamics using Grey-box modelling.


The DT hydrodynamics should be developed as grey-box models with system identification in calm waters. A majority of the publications in the field of system identification use simulated data with added white noise. Even though noise has been added, the model is still perfect, which means that these methods are not confronting the whole problem, where both noise and system model should be unknown. 
Only when using data obtained from real physical systems, from model tests, as used in this thesis, the whole system identification problem is addressed.
As it is shown in both Paper \ref{pap:daiyong} and \ref{pap:pit}, it is possible to get an almost perfect identification of the model, when simulated data is used.

The main disadvantage with black-box modeling, is the dependence on the data used to model the system, which can result in limited extrapolation properties beyond the data that it is derived from \cite{leifsson_grey-box_2008}. The use of grey-box modelling as a combination of white-box and black-box aims at mitigating this disadvantage. A robust model should be capable of making extrapolations with predictions outside its training data, in order to be of practical use.
\bigbreak
\noindent To achieve the overall objective, the following two main research activities are described in this thesis:
% crawling, walking, running...
\begin{enumerate}

    \item Roll motion
    \begin{itemize}
        \item Develop a PIT for roll motion
        \item Build roll damping database for modern ship types tested at SSPA
        \item Develop grey-box model for prediction of modern ship roll damping parameters
    \end{itemize}
    
    \item Manoeuvring motion
    \begin{itemize}
        \item Develop a PIT for three degrees of freedom (surge, sway, yaw)
        \item Develop a method to handle noise
        \item Propose a methodology to choose the appropriate and robust VMM for extrapolation
 
    \end{itemize}
\end{enumerate}

\section{Assumptions and limitations}
%Calm waters...
Calm water condition is a simplification of the real sea condition that a ship encounters. This condition assumes that the influences from encountering wind, waves and currents are neglected. These assumptions simplifies the system identification, by reducing the degrees of freedoms to: surge, sway, yaw and roll. For surge, sway and yaw, which are all low frequency motions, the added masses and other hydrodynamic derivatives can be assumed as constants \cite{fossen_handbook_2021}.  
The sea is never calm, which is why scale model test data in a controlled calm water environment is used in this thesis. System identification of real operational data at sea, where these simplifications cannot be made, is  therefore left for future work. Investigating system identification in calm waters, is however an important step towards DTs in full scale sea operation.

\section{Outline of the paper}
Chapter \ref{ch:models} presents the parameterized models used in this thesis for the Roll motion (Section \ref{sec:roll}) and Manoeuvring motion (Section \ref{sec:VMM}). The PITs used for these motions are presented in Section \ref{sec:PIT_roll} and \ref{sec:PIT_VMM}. A generic roll damping model, to estimate the roll damping coefficients for modern ships is also presented in section \ref{sec:genericrolldampingmodel}.
A summary of the appended papers, including research activities and a selection of the important results is presented in chapter \ref{ch:results}, followed by the conclusions in chapter \ref{ch:conclusions} and plans for future work in chapter \ref{ch:future_work}.

\input{kappa/models}
\input{kappa/methods}
\input{kappa/results}
\input{kappa/conclusions}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Future work\label{ch:future_work}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
